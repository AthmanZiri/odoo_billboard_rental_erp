<?xml version="1.0" encoding="utf-8"?>
<data>
    <template id="report_media_proposal_template">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="web.external_layout">
                    <div class="page">
                        <div class="oe_structure"/>
                        <h2>Media Proposal: <span t-field="doc.name"/></h2>
                        <div class="row mt32 mb32">
                            <div class="col-6">
                                <strong>Client:</strong>
                                <p t-field="doc.partner_id.name"/>
                            </div>
                            <div class="col-6 text-end">
                                <strong>Date:</strong>
                                <p t-field="doc.date_order"/>
                            </div>
                        </div>

                        <table class="table table-sm o_main_table">
                            <thead>
                                <tr>
                                    <th>Face</th>
                                    <th>Site</th>
                                    <th>Start Date</th>
                                    <th>End Date</th>
                                    <th class="text-end">Price</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr t-foreach="doc.order_line" t-as="line">
                                    <t t-if="line.media_face_id">
                                        <td><span t-field="line.media_face_id.name"/></td>
                                        <td><span t-field="line.media_face_id.site_id.name"/></td>
                                        <td><span t-field="line.start_date"/></td>
                                        <td><span t-field="line.end_date"/></td>
                                        <td class="text-end"><span t-field="line.price_subtotal"/></td>
                                    </t>
                                </tr>
                            </tbody>
                        </table>

                        <div class="row mt32">
                            <div class="col-6">
                                <strong>Site Information</strong>
                                <ul>
                                    <t t-foreach="doc.order_line.mapped('media_face_id.site_id')" t-as="site">
                                        <li>
                                            <strong><span t-field="site.name"/></strong>: 
                                            <span t-field="site.city"/>, <span t-field="site.district"/>
                                            (<a t-att-href="site.google_maps_link">Maps</a>)
                                        </li>
                                    </t>
                                </ul>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>
</data>
